{"ast":null,"code":"var _s = $RefreshSig$();\nimport React from 'react';\nconst useCarousel = _ref => {\n  _s();\n  let {\n    rootRef,\n    defaultVisibleIndex = 0\n  } = _ref;\n  const [carouselItems, setCarouselItems] = React.useState([]);\n  const [visibleIndex, setVisible] = React.useState(new Set([defaultVisibleIndex]));\n  React.useEffect(() => {\n    if (rootRef.current) {\n      const C = Array.from(rootRef.current.children);\n      setCarouselItems(C);\n      const options = {\n        root: rootRef.current,\n        rootMargin: '0px',\n        threshold: 1.0\n      };\n      const observer = new IntersectionObserver(e => {\n        e.forEach(entry => {\n          if (entry.intersectionRatio === 1) {\n            console.log(\"Adding \".concat(C.indexOf(entry.target)));\n            visibleIndex.add(C.indexOf(entry.target));\n          } else {\n            console.log(\"Removing \".concat(C.indexOf(entry.target)));\n            visibleIndex.delete(C.indexOf(entry.target));\n          }\n        });\n        console.log(visibleIndex.values());\n        setVisible(new Set(visibleIndex.values()));\n      }, options);\n      C.forEach(target => {\n        observer.observe(target);\n      });\n    }\n  }, [rootRef.current]);\n  return {\n    visibleIndex: Array.from(visibleIndex),\n    scrollToIndex: index => {\n      carouselItems[index].scrollIntoView({\n        behavior: 'smooth',\n        block: 'nearest',\n        inline: 'start'\n      });\n    }\n  };\n};\n_s(useCarousel, \"1yn6VCtT5LOXOoPpj2kdi6O9WiY=\");\nexport { useCarousel };","map":{"version":3,"names":["React","useCarousel","_ref","_s","rootRef","defaultVisibleIndex","carouselItems","setCarouselItems","useState","visibleIndex","setVisible","Set","useEffect","current","C","Array","from","children","options","root","rootMargin","threshold","observer","IntersectionObserver","e","forEach","entry","intersectionRatio","console","log","concat","indexOf","target","add","delete","values","observe","scrollToIndex","index","scrollIntoView","behavior","block","inline"],"sources":["/Users/acm1pro/Downloads/sandbox/src/components/carousel/useCarousel.tsx"],"sourcesContent":["import React from 'react';\n\ninterface UseCarouselProps {\n  rootRef: React.RefObject<HTMLDivElement>;\n  defaultVisibleIndex?: number;\n}\n\nconst useCarousel = ({\n  rootRef,\n  defaultVisibleIndex = 0,\n}: UseCarouselProps): {\n  visibleIndex: number[];\n  scrollToIndex: (index: number) => void;\n} => {\n  const [carouselItems, setCarouselItems] = React.useState<Element[]>([]);\n  const [visibleIndex, setVisible] = React.useState(\n    new Set<number>([defaultVisibleIndex]),\n  );\n\n  React.useEffect(() => {\n    if (rootRef.current) {\n      const C = Array.from(rootRef.current.children);\n      setCarouselItems(C);\n\n      const options = {\n        root: rootRef.current,\n        rootMargin: '0px',\n        threshold: 1.0,\n      };\n\n      const observer = new IntersectionObserver((e) => {\n        e.forEach((entry) => {\n          if (entry.intersectionRatio === 1) {\n            console.log(`Adding ${C.indexOf(entry.target)}`);\n            visibleIndex.add(C.indexOf(entry.target));\n          } else {\n            console.log(`Removing ${C.indexOf(entry.target)}`);\n            visibleIndex.delete(C.indexOf(entry.target));\n          }\n        });\n        console.log(visibleIndex.values());\n        setVisible(new Set(visibleIndex.values()));\n      }, options);\n\n      C.forEach((target) => {\n        observer.observe(target);\n      });\n    }\n  }, [rootRef.current]);\n\n  return {\n    visibleIndex: Array.from(visibleIndex),\n    scrollToIndex: (index: number) => {\n      carouselItems[index].scrollIntoView({\n        behavior: 'smooth',\n        block: 'nearest',\n        inline: 'start',\n      });\n    },\n  };\n};\n\nexport { useCarousel };\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AAOzB,MAAMC,WAAW,GAAGC,IAAA,IAMf;EAAAC,EAAA;EAAA,IANgB;IACnBC,OAAO;IACPC,mBAAmB,GAAG;EACN,CAAC,GAAAH,IAAA;EAIjB,MAAM,CAACI,aAAa,EAAEC,gBAAgB,CAAC,GAAGP,KAAK,CAACQ,QAAQ,CAAY,EAAE,CAAC;EACvE,MAAM,CAACC,YAAY,EAAEC,UAAU,CAAC,GAAGV,KAAK,CAACQ,QAAQ,CAC/C,IAAIG,GAAG,CAAS,CAACN,mBAAmB,CAAC,CACvC,CAAC;EAEDL,KAAK,CAACY,SAAS,CAAC,MAAM;IACpB,IAAIR,OAAO,CAACS,OAAO,EAAE;MACnB,MAAMC,CAAC,GAAGC,KAAK,CAACC,IAAI,CAACZ,OAAO,CAACS,OAAO,CAACI,QAAQ,CAAC;MAC9CV,gBAAgB,CAACO,CAAC,CAAC;MAEnB,MAAMI,OAAO,GAAG;QACdC,IAAI,EAAEf,OAAO,CAACS,OAAO;QACrBO,UAAU,EAAE,KAAK;QACjBC,SAAS,EAAE;MACb,CAAC;MAED,MAAMC,QAAQ,GAAG,IAAIC,oBAAoB,CAAEC,CAAC,IAAK;QAC/CA,CAAC,CAACC,OAAO,CAAEC,KAAK,IAAK;UACnB,IAAIA,KAAK,CAACC,iBAAiB,KAAK,CAAC,EAAE;YACjCC,OAAO,CAACC,GAAG,WAAAC,MAAA,CAAWhB,CAAC,CAACiB,OAAO,CAACL,KAAK,CAACM,MAAM,CAAC,CAAE,CAAC;YAChDvB,YAAY,CAACwB,GAAG,CAACnB,CAAC,CAACiB,OAAO,CAACL,KAAK,CAACM,MAAM,CAAC,CAAC;UAC3C,CAAC,MAAM;YACLJ,OAAO,CAACC,GAAG,aAAAC,MAAA,CAAahB,CAAC,CAACiB,OAAO,CAACL,KAAK,CAACM,MAAM,CAAC,CAAE,CAAC;YAClDvB,YAAY,CAACyB,MAAM,CAACpB,CAAC,CAACiB,OAAO,CAACL,KAAK,CAACM,MAAM,CAAC,CAAC;UAC9C;QACF,CAAC,CAAC;QACFJ,OAAO,CAACC,GAAG,CAACpB,YAAY,CAAC0B,MAAM,CAAC,CAAC,CAAC;QAClCzB,UAAU,CAAC,IAAIC,GAAG,CAACF,YAAY,CAAC0B,MAAM,CAAC,CAAC,CAAC,CAAC;MAC5C,CAAC,EAAEjB,OAAO,CAAC;MAEXJ,CAAC,CAACW,OAAO,CAAEO,MAAM,IAAK;QACpBV,QAAQ,CAACc,OAAO,CAACJ,MAAM,CAAC;MAC1B,CAAC,CAAC;IACJ;EACF,CAAC,EAAE,CAAC5B,OAAO,CAACS,OAAO,CAAC,CAAC;EAErB,OAAO;IACLJ,YAAY,EAAEM,KAAK,CAACC,IAAI,CAACP,YAAY,CAAC;IACtC4B,aAAa,EAAGC,KAAa,IAAK;MAChChC,aAAa,CAACgC,KAAK,CAAC,CAACC,cAAc,CAAC;QAClCC,QAAQ,EAAE,QAAQ;QAClBC,KAAK,EAAE,SAAS;QAChBC,MAAM,EAAE;MACV,CAAC,CAAC;IACJ;EACF,CAAC;AACH,CAAC;AAACvC,EAAA,CArDIF,WAAW;AAuDjB,SAASA,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}